---
title: "vue-property-decorator + TypeScriptã§æ›¸ã‹ã‚ŒãŸVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’script setupã§æ›¸ãæ›ãˆã‚‹"
emoji: "ğŸš€"
type: "tech"
topics:
  - "typescript"
  - "vuejs"
published: true
published_at: "2022-06-06 00:35"
---

Nuxt3ã®stableç‰ˆãŒãƒªãƒªãƒ¼ã‚¹é–“è¿‘(2022/06/06ç¾åœ¨)ã¨ã„ã†ã“ã¨ã§ã€Nuxt.jsã§ã‚‚Vue3ã§æ›¸ãã®ãŒã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚
Vue2ã¾ã§ã¯vue-class-componentã‚„vue-property-decoratorã‚’ä½¿ã£ã¦ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’classã«ã—ã¦TypeScriptã§æ›¸ãã“ã¨ãŒã§ãã¦ã„ã¾ã—ãŸã€‚
Vue3ã§ã¯Composition APIã«ã‚ˆã£ã¦TypeScriptã§è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ã•ã‚‰ã«Vue.js 3.2 ã‹ã‚‰ã¯ `<script setup>` æ§‹æ–‡ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚ŠComposition API ã‚’ç°¡æ½”ã«è¨˜è¿°ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ã“ã“ã§ã¯ã€vue-property-decoratorã§æ›¸ã‹ã‚ŒãŸVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ `script setup` ã®æ§‹æ–‡ã«æ›¸ãæ›ãˆã‚‹ã«ã‚ãŸã£ã¦ã€ãã‚Œãã‚Œã®è¨˜æ³•ãŒã©ã†å¯¾å¿œã—ã¦ã„ã‚‹ã®ã‹ã‚’è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

## æ¦‚è¦³

å…¨ä½“åƒã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```vue
<template>
  <button type="button" @click="handleClick">
    {{ text }}
    <IconButton />
  </button>
</template>

<script lang="ts">
import { Component, Vue, Prop, Emit } from 'vue-property-decorator'
import IconButton from '@/components/IconButton.vue'

@Component({
  components: {
    IconButton,
  },
})
export default class ButtonPrimary extends Vue {
  @Prop({ type: String, required: true })
  private readonly text!: string

  @Emit('clickButton')
  handleClick() {}
}
</script>
```

```vue
<template>
  <button type="button" @click="handleClick">
    {{ text }}
    <IconButton />
  </button>
</template>

<script lang="ts" setup>
import IconButton from '@/components/IconButton.vue'

interface Props {
  text: string
}
defineProps<Props>()

defineEmits<{
  (e: 'click-button'): void
}>()
</script>
```

ä»¥ä¸‹å€‹åˆ¥ã«è¦‹ã¦ã„ãã¾ã™ã€‚

### @Component

class component

```vue
<template>
  <div>
    <ChildComponent1 />
    <ChildComponent2 />
  </div>
</template>

<script lang="ts">
import ChildComponent1 from './ChildComponent1.vue'
import ChildComponent2 from './ChildComponent2.vue'

@Component({
  components: {
    ChildComponent1,
    ChildComponent2,
  },
})
export default class MyComponent extends Vue {

}
</script>
```

script setup

```vue
<template>
  <div>
    <ChildComponent1 />
    <ChildComponent2 />
  </div>
</template>

<script setup lang="ts">
import ChildComponent1 from './ChildComponent1.vue'
import ChildComponent2 from './ChildComponent2.vue'
</script>
```

importæ–‡ã‚’æ›¸ãã ã‘ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## Data

class component

```vue
<script lang="ts">
@Component
export default class MyComponent extends Vue {
  message = 'Hello'

  onInput(value: string) {
    this.message = value
  }
}
</script>
```

script setup

```vue
<script setup lang="ts">
const message = ref('Hello')

const onInput = (value: string) => {
  message.value = value
}
</script>
```

`ref` ã§å®£è¨€ã™ã‚‹ã“ã¨ã§reactiveãªå€¤ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
å€¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ `.value` ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### @Prop

class component

```vue
<script lang="ts">
@Component
export default class MyComponent extends Vue {
  @Prop({ type: String, required: true })
  private readonly text!: string

  // defaultå€¤
  @Prop({ type: Number, default: 2 })
  private readonly num!: number

  // Object
  @Prop({ type: Object, required: true })
  private readonly myObj!: MyObj

}
</script>
```

script setup

```vue
<script setup lang="ts">
interface Props {
  text: string
  num?: number
  myObj: MyObj
}
const props = withDefaults(defineProps<Props>(), {
  num: 2,
})

</script>
```

ç‹¬è‡ªå‹ã‚‚ãã¡ã‚“ã¨å‹ã‚’ä»˜ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹å´ã§ã‚‚è£œå®ŒãŒåŠ¹ãã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

### @Emit

class component

```vue
<script lang="ts">
@Component
export default class MyComponent extends Vue {
  @Emit('clickButton')
  handleClick(num: number) {
    return num
  }

}
</script>
```

script setup

```vue
<script setup lang="ts">
const emits = defineEmits<{
  (e:'click-button', num: number): void
}>()

const handleClick = (num: number) => {
  emits('click-button', num)
}
</script>
```

### @Watch

class component

```vue
<script lang="ts">
@Component
export default class MyComponent extends Vue {
  checkBox: boolean = false

  @Watch('checkBox')
  watchValue(value: boolean) {
    if (value) {
        alert('checked!!')
    }
  }
}
</script>
```

script setup

```vue
<script setup lang="ts">
const checkBox = ref(false)

watch(
  checkBox,
  (value: boolean) => {
    if (value) {
        alert('checked!!')
    }
  }
)
</script>
```

### @Ref

class component

```vue
<template>
  <ChildComponent ref="childComponent" />
  <button ref="submitButton">Submit</button>
</template>

<script lang="ts">
import ChildComponent from './ChildComponent.vue'

@Component
export default class MyComponent extends Vue {
  @Ref() readonly childComponent!: ChildComponent
  @Ref('submitButton') readonly button!: HTMLButtonElement
}
</script>
```

script setup

```vue
<template>
  <ChildComponent ref="childComponent" />
  <button ref="submitButton">Submit</button>
</template>

<script setup lang="ts">
const childComponent = ref<ChildComponent>()
const submitButton = ref<HTMLButtonElement>()
</script>
```

åŒã˜å¤‰æ•°åã®refã§å®£è¨€ã™ã‚‹ã ã‘ã§å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ

### Computed

class component

```vue
<script lang="ts">
@Component
export default class MyComponent extends Vue {
  firstName = 'John'
  lastName = 'Doe'

  get name() {
    return this.firstName + ' ' + this.lastName
  }

  set name(value) {
    const splitted = value.split(' ')
    this.firstName = splitted[0]
    this.lastName = splitted[1] || ''
  }
}
</script>
```

script setup

```vue
<script setup lang="ts">
const firstName = ref('John')
const lastName = ref('Doe')

const name = computed({
  get: () =>  firstName + ' ' + lastName,
  set: (value) => {
    const splitted = value.split(' ')
    firstName.value = splitted[0]
    lastName.value = splitted[1] || ''
  }
})

</script>
```

### Hooks

class component

```vue
<script lang="ts">
@Component
export default class MyComponent extends Vue {
  mounted() {
    console.log('mounted')
  }
}
</script>
```

script setup

```vue
<script setup lang="ts">
onMounted(() => {
  console.log('mounted')
})
</script>
```

Vue2 -> 3ã§ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ãƒƒã‚¯ã®å¤‰æ›´ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã‚’å‚ç…§
[ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ãƒƒã‚¯ | Vue.js](https://v3.ja.vuejs.org/guide/composition-api-lifecycle-hooks.html)

- setup ã¯ beforeCreate ã¨ created ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã®ãƒ•ãƒƒã‚¯å†…ã§å®Ÿè¡Œã—ã¦ã„ãŸã‚³ãƒ¼ãƒ‰ã¯setupå†…ã«ç›´æ¥æ›¸ã
- mounted -> onMounted ã®ã‚ˆã†ã«ã€onXXXXXã¨ã„ã†åå‰ã«å¤‰ã‚ã£ãŸ
