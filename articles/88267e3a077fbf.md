---
title: "[Karabiner-Elements] Macã§Push to Talk(ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã„ã‚‹é–“ã ã‘éŸ³å£°é€ä¿¡çŠ¶æ…‹ã«ã™ã‚‹)ã‚’å®Ÿç¾ã™ã‚‹"
emoji: "ğŸ™ï¸"
type: "tech"
topics:
  - "macos"
  - "åŠ¹ç‡åŒ–"
  - "karabiner"
published: true
published_at: "2023-10-01 23:42"
---

## Push to Talk(PTT)

Webä¼šè­°ã‚’ã—ã¦ã„ã¦ã€ã‚ã‚‹ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã„ã‚‹ã ã‘éŸ³å£°ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚
ã ã„ãŸã„ã®Webä¼šè­°ãƒ„ãƒ¼ãƒ«ã«ã¯ãƒŸãƒ¥ãƒ¼ãƒˆãƒ»ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã§éŸ³å£°ã®å…¥åŠ›ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## åˆ©ç”¨ã™ã‚‹ã‚‚ã®

- AppleScript
- Karabiner-Elements

## éŸ³å£°å…¥åŠ›ãƒ¬ãƒ™ãƒ«ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹AppleScriptã‚’ä½œæˆ

`~/.config/karabiner/adjust_mic_volume.applescript` ã«ä½œæˆã—ã¾ã™ã€‚

```applescript:adjust_mic_volume.applescript
#!/usr/bin/osascript

on run argv
    set micVolume to (item 1 of argv)
    set volume input volume vol micVolume
    display notification ("Set mic volume to " & micVolume) with title "Mic"
    return micVolume
end run
```

`set volume input volume <number>` ã§ã‚·ã‚¹ãƒ†ãƒ ã®å…¥åŠ›éŸ³é‡ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

`./adjust_mic_volume.applescript <number>` ã§éŸ³é‡ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚
`./adjust_mic_volume.applescript 0` ã§ãƒŸãƒ¥ãƒ¼ãƒˆã€ `./adjust_mic_volume.applescript 100` ã§æœ€å¤§éŸ³é‡ã¨ãªã‚Šã¾ã™ã€‚

## AppleScriptã‚’å®Ÿè¡Œã™ã‚‹ã‚­ãƒ¼ã‚’è¨­å®šã™ã‚‹

ä¸Šè¨˜ã®AppleScriptã‚’å®Ÿè¡Œã™ã‚‹ã‚­ãƒ¼ã‚’Karabiner-Elementsã§å‰²ã‚Šå½“ã¦ã¾ã™ã€‚
ç§ã¯F5ã«å‰²ã‚Šå½“ã¦ã¦ã„ã¾ã™ãŒã€å¥½ããªã‚­ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ã¦ãã ã•ã„ã€‚
ã“ã®è¨­å®šã§æ¬¡ã®ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

- F5 ã‚’æŠ¼ã—ã¦ã„ã‚‹é–“ã ã‘ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã™ã‚‹
- F5 ã‚’é›¢ã™ã¨ãƒŸãƒ¥ãƒ¼ãƒˆã«ãªã‚‹
- Cmd+F5 ã‚’æŠ¼ã™ã¨ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã®ã¾ã¾ã«ãªã‚‹

```json:karabiner.json
{
  "profiles": [
    {
      "complex_modifications": {
        "rules": [
	  ....

          {
            "description": "Push to talk",
            "manipulators": [
              {
                "from": {
                  "key_code": "f5"
                },
                "to": [
                  {
                    "shell_command": "~/.config/karabiner/adjust_mic_volume.applescript 80"
                  }
                ],
                "to_after_key_up": [
                  {
                    "shell_command": "~/.config/karabiner/adjust_mic_volume.applescript 0"
                  }
                ],
                "type": "basic"
              },
              {
                "from": {
                  "key_code": "f5",
                  "modifiers": {
                    "mandatory": [
                      "left_command"
                    ]
                  }
                },
                "to": [
                  {
                    "shell_command": "~/.config/karabiner/adjust_mic_volume.applescript 80"
                  }
                ],
                "type": "basic"
              }
            ]
          }
        ]
      }
    }
  ]
}
```

å°‘ã—è§£èª¬

- `shell_command` ã«ã‚ˆã‚Šã‚­ãƒ¼ã‚’æŠ¼ã—ãŸã¨ãã«shellã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™
- F5ã‚’æŠ¼ã™ã¨å…¥åŠ›ãƒ¬ãƒ™ãƒ«ã‚’80ã«è¨­å®šã™ã‚‹ `shell_command` ãŒå®Ÿè¡Œã•ã‚Œã€ `to_after_key_up` ã«ã‚ˆã‚Šã‚­ãƒ¼ã‚’é›¢ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§0ã«ã™ã‚‹ `shell_command` ãŒå®Ÿè¡Œã•ã‚Œã¾ã™